import{b as P,d as T}from"./chunk-3ZPFXBA2.js";import{a as U}from"./chunk-JA43OOZB.js";import{a as B,b as D,c as N,d as I,e as L,f as O,g as q,h as A,i as R,j,k,l as x}from"./chunk-TGRUN4F4.js";import{Aa as M,Ca as c,Ea as i,Fa as o,Ha as v,Ia as S,Ka as b,La as r,Ma as w,Na as f,Pa as y,Qa as g,Ra as u,Ta as F,U as C,aa as m,ba as p,ob as V,pa as l,qa as h,sb as W}from"./chunk-AF7HNTUN.js";function G(_,E){if(_&1&&(i(0,"option",26),r(1),o()),_&2){let n=E.$implicit;c("value",n.department_id),l(),f(" ",n.department_name," ")}}function H(_,E){if(_&1&&(i(0,"option",26),r(1),o()),_&2){let n=E.$implicit;c("value",n.position_id),l(),f(" ",n.position_name," ")}}var $=(()=>{class _{constructor(n,d,e){this.employeeService=n,this.router=d,this.route=e,this.employee={first_name:"",last_name:"",email:"",hire_date:"",department_id:0,position_id:0,salary:0,status:"active"},this.departments=[],this.positions=[],this.isEditMode=!1,this.loading=!1}ngOnInit(){this.loadDepartments(),this.loadPositions();let n=this.route.snapshot.paramMap.get("id");n&&(this.isEditMode=!0,this.loadEmployee(+n))}loadDepartments(){this.employeeService.getDepartments().subscribe({next:n=>this.departments=n,error:n=>console.error("Error loading departments:",n)})}loadPositions(){this.employeeService.getPositions().subscribe({next:n=>this.positions=n,error:n=>console.error("Error loading positions:",n)})}loadEmployee(n){this.employeeService.getEmployeeById(n).subscribe({next:d=>this.employee=d,error:d=>console.error("Error loading employee:",d)})}onSubmit(){this.loading=!0,(this.isEditMode?this.employeeService.updateEmployee(this.employee.employee_id,this.employee):this.employeeService.createEmployee(this.employee)).subscribe({next:()=>{alert(`Employee ${this.isEditMode?"updated":"created"} successfully`),this.router.navigate(["/employees"])},error:d=>{console.error("Error saving employee:",d),alert("Failed to save employee"),this.loading=!1}})}cancel(){this.router.navigate(["/employees"])}static{this.\u0275fac=function(d){return new(d||_)(h(U),h(T),h(P))}}static{this.\u0275cmp=C({type:_,selectors:[["app-employee-form"]],standalone:!0,features:[F],decls:65,vars:16,consts:[["employeeForm","ngForm"],[1,"container"],[1,"page-header"],[1,"text-muted"],[1,"card",2,"max-width","800px","margin","0 auto"],[3,"ngSubmit"],[1,"grid","grid-2"],[1,"form-group"],[1,"form-label"],["type","text","name","first_name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","last_name","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","tel","name","phone",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","date_of_birth",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","hire_date","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","department_id","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","position_id","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","salary","step","0.01","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","status",1,"form-control",3,"ngModelChange","ngModel"],["value","active"],["value","inactive"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"value"]],template:function(d,e){if(d&1){let a=v();i(0,"div",1)(1,"div",2)(2,"h1"),r(3),o(),i(4,"p",3),r(5),o()(),i(6,"div",4)(7,"form",5,0),S("ngSubmit",function(){return m(a),p(e.onSubmit())}),i(9,"div",6)(10,"div",7)(11,"label",8),r(12,"First Name *"),o(),i(13,"input",9),u("ngModelChange",function(t){return m(a),g(e.employee.first_name,t)||(e.employee.first_name=t),p(t)}),o()(),i(14,"div",7)(15,"label",8),r(16,"Last Name *"),o(),i(17,"input",10),u("ngModelChange",function(t){return m(a),g(e.employee.last_name,t)||(e.employee.last_name=t),p(t)}),o()(),i(18,"div",7)(19,"label",8),r(20,"Email *"),o(),i(21,"input",11),u("ngModelChange",function(t){return m(a),g(e.employee.email,t)||(e.employee.email=t),p(t)}),o()(),i(22,"div",7)(23,"label",8),r(24,"Phone"),o(),i(25,"input",12),u("ngModelChange",function(t){return m(a),g(e.employee.phone,t)||(e.employee.phone=t),p(t)}),o()(),i(26,"div",7)(27,"label",8),r(28,"Date of Birth"),o(),i(29,"input",13),u("ngModelChange",function(t){return m(a),g(e.employee.date_of_birth,t)||(e.employee.date_of_birth=t),p(t)}),o()(),i(30,"div",7)(31,"label",8),r(32,"Hire Date *"),o(),i(33,"input",14),u("ngModelChange",function(t){return m(a),g(e.employee.hire_date,t)||(e.employee.hire_date=t),p(t)}),o()(),i(34,"div",7)(35,"label",8),r(36,"Department *"),o(),i(37,"select",15),u("ngModelChange",function(t){return m(a),g(e.employee.department_id,t)||(e.employee.department_id=t),p(t)}),i(38,"option",16),r(39,"Select Department"),o(),M(40,G,2,2,"option",17),o()(),i(41,"div",7)(42,"label",8),r(43,"Position *"),o(),i(44,"select",18),u("ngModelChange",function(t){return m(a),g(e.employee.position_id,t)||(e.employee.position_id=t),p(t)}),i(45,"option",16),r(46,"Select Position"),o(),M(47,H,2,2,"option",17),o()(),i(48,"div",7)(49,"label",8),r(50,"Salary *"),o(),i(51,"input",19),u("ngModelChange",function(t){return m(a),g(e.employee.salary,t)||(e.employee.salary=t),p(t)}),o()(),i(52,"div",7)(53,"label",8),r(54,"Status"),o(),i(55,"select",20),u("ngModelChange",function(t){return m(a),g(e.employee.status,t)||(e.employee.status=t),p(t)}),i(56,"option",21),r(57,"Active"),o(),i(58,"option",22),r(59,"Inactive"),o()()()(),i(60,"div",23)(61,"button",24),r(62),o(),i(63,"button",25),S("click",function(){return m(a),p(e.cancel())}),r(64," \u274C Cancel "),o()()()()()}if(d&2){let a=b(8);l(3),w(e.isEditMode?"Edit Employee":"Add New Employee"),l(2),w(e.isEditMode?"Update employee information":"Register a new employee"),l(8),y("ngModel",e.employee.first_name),l(4),y("ngModel",e.employee.last_name),l(4),y("ngModel",e.employee.email),l(4),y("ngModel",e.employee.phone),l(4),y("ngModel",e.employee.date_of_birth),l(4),y("ngModel",e.employee.hire_date),l(4),y("ngModel",e.employee.department_id),l(3),c("ngForOf",e.departments),l(4),y("ngModel",e.employee.position_id),l(3),c("ngForOf",e.positions),l(4),y("ngModel",e.employee.salary),l(4),y("ngModel",e.employee.status),l(6),c("disabled",!a.form.valid||e.loading),l(),f(" ",e.isEditMode?"\u{1F4BE} Update Employee":"\u2795 Add Employee"," ")}},dependencies:[W,V,x,O,R,j,B,q,A,D,N,k,L,I],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem;padding-top:2rem;border-top:1px solid rgba(0,0,0,.05)}@media (max-width: 768px){.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return _})();export{$ as EmployeeFormComponent};
