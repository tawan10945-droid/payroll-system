import{a as Q}from"./chunk-OMGBJQ7U.js";import{a as K}from"./chunk-JA43OOZB.js";import{a as V,b as k,c as j,d as q,e as A,f as $,h as L,i as R,j as G,k as z,l as J}from"./chunk-TGRUN4F4.js";import{Aa as u,Ca as m,Ea as t,Fa as i,Ha as w,Ia as C,Ja as b,La as l,Ma as I,Na as s,Oa as h,Pa as g,Qa as v,Ra as P,Ta as O,U as S,Wa as B,Xa as d,Ya as x,Za as c,aa as E,ba as M,nb as F,ob as N,pa as n,pb as T,qa as f,qb as D,rb as W,sb as H}from"./chunk-AF7HNTUN.js";var U=(r,y,e)=>({"badge-success":r,"badge-warning":y,"badge-info":e});function X(r,y){if(r&1&&(t(0,"option",20),l(1),i()),r&2){let e=y.$implicit;m("value",e.employee_id),n(),h(" ",e.first_name," ",e.last_name," ")}}function Y(r,y){if(r&1){let e=w();t(0,"div",21)(1,"h4"),l(2,"Payroll Preview"),i(),t(3,"div",22)(4,"div",23)(5,"span",24),l(6,"Basic Salary:"),i(),t(7,"span",25),l(8),d(9,"number"),i()(),t(10,"div",23)(11,"span",24),l(12,"Overtime Pay:"),i(),t(13,"span",25),l(14),d(15,"number"),i()(),t(16,"div",23)(17,"span",24),l(18,"Bonus:"),i(),t(19,"span",25),l(20),d(21,"number"),i()(),t(22,"div",23)(23,"span",24),l(24,"Gross Pay:"),i(),t(25,"span",26),l(26),d(27,"number"),i()(),t(28,"div",23)(29,"span",24),l(30,"Tax Deduction:"),i(),t(31,"span",27),l(32),d(33,"number"),i()(),t(34,"div",23)(35,"span",24),l(36,"Other Deductions:"),i(),t(37,"span",27),l(38),d(39,"number"),i()(),t(40,"div",28)(41,"span",24)(42,"strong"),l(43,"Net Pay:"),i()(),t(44,"span",25)(45,"strong"),l(46),d(47,"number"),i()()()(),t(48,"button",29),C("click",function(){E(e);let a=b();return M(a.processPayroll())}),l(49," \u2713 Process Payment "),i()()}if(r&2){let e=b();n(8),s("$",c(9,7,e.calculatedPayroll.basic_salary,"1.2-2"),""),n(6),s("$",c(15,10,e.calculatedPayroll.overtime_pay,"1.2-2"),""),n(6),s("$",c(21,13,e.calculatedPayroll.bonus_amount,"1.2-2"),""),n(6),s("$",c(27,16,e.calculatedPayroll.gross_pay,"1.2-2"),""),n(6),s("-$",c(33,19,e.calculatedPayroll.tax_deduction,"1.2-2"),""),n(6),s("-$",c(39,22,e.calculatedPayroll.other_deductions,"1.2-2"),""),n(8),s("$",c(47,25,e.calculatedPayroll.net_pay,"1.2-2"),"")}}function Z(r,y){r&1&&(t(0,"div",30),l(1," No payroll records found "),i())}function ee(r,y){if(r&1&&(t(0,"div",31)(1,"div",32)(2,"strong"),l(3),d(4,"number"),i(),t(5,"p",33),l(6),d(7,"date"),d(8,"date"),i()(),t(9,"span",34),l(10),i()()),r&2){let e=y.$implicit;n(3),s("$",c(4,5,e.net_pay,"1.2-2"),""),n(3),h(" ",x(7,8,e.pay_period_start)," - ",x(8,10,e.pay_period_end)," "),n(3),m("ngClass",B(12,U,e.status==="paid",e.status==="pending",e.status==="processing")),n(),I(e.status)}}var de=(()=>{class r{constructor(e,p){this.employeeService=e,this.payrollService=p,this.employees=[],this.payrollHistory=[],this.selectedEmployeeId=null,this.payPeriod={start:"",end:""},this.calculatedPayroll=null,this.loading=!1}ngOnInit(){this.loadEmployees(),this.loadPayrollHistory()}loadEmployees(){this.employeeService.getAllEmployees().subscribe({next:e=>this.employees=e.filter(p=>p.status==="active"),error:e=>console.error("Error loading employees:",e)})}loadPayrollHistory(){this.payrollService.getAllPayroll().subscribe({next:e=>this.payrollHistory=e.slice(0,10),error:e=>console.error("Error loading payroll history:",e)})}calculatePayroll(){this.selectedEmployeeId&&(this.loading=!0,this.payrollService.calculatePayroll(this.selectedEmployeeId,this.payPeriod).subscribe({next:e=>{this.calculatedPayroll=e,this.loading=!1},error:e=>{console.error("Error calculating payroll:",e),alert("Failed to calculate payroll"),this.loading=!1}}))}processPayroll(){this.calculatedPayroll?.payroll_id&&this.payrollService.processPayroll(this.calculatedPayroll.payroll_id).subscribe({next:()=>{alert("Payroll processed successfully"),this.calculatedPayroll=null,this.selectedEmployeeId=null,this.payPeriod={start:"",end:""},this.loadPayrollHistory()},error:e=>{console.error("Error processing payroll:",e),alert("Failed to process payroll")}})}static{this.\u0275fac=function(p){return new(p||r)(f(K),f(Q))}}static{this.\u0275cmp=S({type:r,selectors:[["app-payroll-calculation"]],standalone:!0,features:[O],decls:38,vars:8,consts:[[1,"container"],[1,"page-header"],[1,"text-muted"],[1,"grid","grid-2"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"ngSubmit"],[1,"form-group"],[1,"form-label"],["name","employee","required","",1,"form-control",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","date","name","start_date","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","end_date","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","payroll-preview mt-4",4,"ngIf"],["class","text-center text-muted",4,"ngIf"],["class","payroll-record",4,"ngFor","ngForOf"],[3,"value"],[1,"payroll-preview","mt-4"],[1,"preview-grid"],[1,"preview-item"],[1,"label"],[1,"value"],[1,"value","text-success"],[1,"value","text-error"],[1,"preview-item","highlight"],[1,"btn","btn-success","mt-3",3,"click"],[1,"text-center","text-muted"],[1,"payroll-record"],[1,"record-info"],[1,"text-muted",2,"margin","0","font-size","0.85rem"],[1,"badge",3,"ngClass"]],template:function(p,a){p&1&&(t(0,"div",0)(1,"div",1)(2,"h1"),l(3,"Payroll Calculation"),i(),t(4,"p",2),l(5,"Calculate and process employee payroll"),i()(),t(6,"div",3)(7,"div",4)(8,"div",5)(9,"h3",6),l(10,"Calculate Payroll"),i()(),t(11,"div",7)(12,"form",8),C("ngSubmit",function(){return a.calculatePayroll()}),t(13,"div",9)(14,"label",10),l(15,"Select Employee *"),i(),t(16,"select",11),P("ngModelChange",function(o){return v(a.selectedEmployeeId,o)||(a.selectedEmployeeId=o),o}),t(17,"option",12),l(18,"Choose an employee"),i(),u(19,X,2,3,"option",13),i()(),t(20,"div",9)(21,"label",10),l(22,"Pay Period Start *"),i(),t(23,"input",14),P("ngModelChange",function(o){return v(a.payPeriod.start,o)||(a.payPeriod.start=o),o}),i()(),t(24,"div",9)(25,"label",10),l(26,"Pay Period End *"),i(),t(27,"input",15),P("ngModelChange",function(o){return v(a.payPeriod.end,o)||(a.payPeriod.end=o),o}),i()(),t(28,"button",16),l(29," \u{1F4B0} Calculate Payroll "),i()(),u(30,Y,50,28,"div",17),i()(),t(31,"div",4)(32,"div",5)(33,"h3",6),l(34,"Recent Payroll Records"),i()(),t(35,"div",7),u(36,Z,2,0,"div",18)(37,ee,11,16,"div",19),i()()()()),p&2&&(n(16),g("ngModel",a.selectedEmployeeId),n(3),m("ngForOf",a.employees),n(4),g("ngModel",a.payPeriod.start),n(4),g("ngModel",a.payPeriod.end),n(),m("disabled",!a.selectedEmployeeId||a.loading),n(2),m("ngIf",a.calculatedPayroll),n(6),m("ngIf",a.payrollHistory.length===0),n(),m("ngForOf",a.payrollHistory))},dependencies:[H,F,N,T,W,D,J,$,R,G,V,L,k,j,z,A,q],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.payroll-preview[_ngcontent-%COMP%]{background:var(--bg-secondary);border-radius:var(--radius-md);padding:1.5rem;border:1px solid rgba(0,0,0,.05)}.payroll-preview[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--text-primary)}.preview-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.preview-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid rgba(0,0,0,.05)}.preview-item.highlight[_ngcontent-%COMP%]{background:#6366f11a;padding:1rem;border-radius:var(--radius-md);border:1px solid var(--primary-color);margin-top:.5rem}.preview-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--text-secondary)}.preview-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:500}.payroll-record[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;border-bottom:1px solid rgba(0,0,0,.05)}.payroll-record[_ngcontent-%COMP%]:last-child{border-bottom:none}.record-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--text-primary)}"]})}}return r})();export{de as PayrollCalculationComponent};
