import{I as s,L as n,Q as i,h as o,wb as u}from"./chunk-AF7HNTUN.js";var g=(()=>{class r{constructor(t){if(this.http=t,this.apiUrl="/api/auth",this.currentUserSubject=new o(null),this.currentUser$=this.currentUserSubject.asObservable(),this.getToken()){let c=this.getUserFromStorage();this.currentUserSubject.next(c)}}login(t){return this.http.post(`${this.apiUrl}/login`,t).pipe(s(e=>{this.setToken(e.token),this.setUser(e.user),this.currentUserSubject.next(e.user)}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.currentUserSubject.next(null)}getToken(){return localStorage.getItem("token")}setToken(t){localStorage.setItem("token",t)}setUser(t){localStorage.setItem("user",JSON.stringify(t))}getUserFromStorage(){let t=localStorage.getItem("user");return t?JSON.parse(t):null}isAuthenticated(){return!!this.getToken()}getCurrentUser(){return this.currentUserSubject.value}static{this.\u0275fac=function(e){return new(e||r)(i(u))}}static{this.\u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();export{g as a};
